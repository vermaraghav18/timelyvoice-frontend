{
  "version": 2,

  "routes": [
    { "src": "^/api/edge-ssr/(.*)$", "dest": "/api/edge-ssr/$1" },

    { "src": "^/api/(.*)$", "dest": "https://timelyvoice-backend.onrender.com/api/$1" },
    { "src": "^/uploads/(.*)$", "dest": "https://timelyvoice-backend.onrender.com/uploads/$1" },

    { "src": "^/robots\\.txt$", "dest": "https://timelyvoice-backend.onrender.com/robots.txt" },
    { "src": "^/sitemap\\.xml$", "dest": "https://timelyvoice-backend.onrender.com/sitemap.xml" },
    { "src": "^/news-sitemap\\.xml$", "dest": "https://timelyvoice-backend.onrender.com/news-sitemap.xml" },
    { "src": "^/rss\\.xml$", "dest": "https://timelyvoice-backend.onrender.com/rss.xml" },
    { "src": "^/rss/(.*)$", "dest": "https://timelyvoice-backend.onrender.com/rss/$1" },
    { "src": "^/ads\\.txt$", "dest": "https://timelyvoice-backend.onrender.com/ads.txt" },

    { "src": "^/ssr/(.*)$", "dest": "https://timelyvoice-backend.onrender.com/ssr/$1" },

    {
      "src": "^/article/([^/?#]+)$",
      "headers": {
        "user-agent": ".*(googlebot|bingbot|duckduckbot|yandex|baiduspider|slurp|mediapartners-google|adsbot-google|facebookexternalhit|twitterbot|linkedinbot|slackbot|discordbot).*"
      },
      "dest": "https://timelyvoice-backend.onrender.com/ssr/article/$1"
    },
    {
      "src": "^/article/([^/?#]+)$",
      "query": { "_bot": "1" },
      "dest": "https://timelyvoice-backend.onrender.com/ssr/article/$1"
    },

    {
      "src": "^/$",
      "headers": {
        "user-agent": ".*(googlebot|bingbot|duckduckbot|yandex|baiduspider|slurp|mediapartners-google|adsbot-google|facebookexternalhit|twitterbot|linkedinbot|slackbot|discordbot).*"
      },
      "dest": "https://timelyvoice-backend.onrender.com/ssr/home"
    },
    {
      "src": "^/$",
      "query": { "_bot": "1" },
      "dest": "https://timelyvoice-backend.onrender.com/ssr/home"
    },

    { "src": "^/article/([^/?#]+)/$", "status": 308, "headers": { "Location": "/article/$1" } },
    { "src": "^/category/([^/?#]+)/$", "status": 308, "headers": { "Location": "/category/$1" } },

    { "handle": "filesystem" },
    { "src": "^(.*)$", "dest": "/" }
  ]
}
